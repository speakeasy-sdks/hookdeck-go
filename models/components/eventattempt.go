// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package components

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/speakeasy-sdks/hookdeck-go/internal/utils"
	"time"
)

// One - Response body from the destination
type One struct {
}

type BodyType string

const (
	BodyTypeOne BodyType = "1"
	BodyTypeStr BodyType = "str"
)

type Body struct {
	One *One
	Str *string

	Type BodyType
}

func CreateBodyOne(one One) Body {
	typ := BodyTypeOne

	return Body{
		One:  &one,
		Type: typ,
	}
}

func CreateBodyStr(str string) Body {
	typ := BodyTypeStr

	return Body{
		Str:  &str,
		Type: typ,
	}
}

func (u *Body) UnmarshalJSON(data []byte) error {

	one := One{}
	if err := utils.UnmarshalJSON(data, &one, "", true, true); err == nil {
		u.One = &one
		u.Type = BodyTypeOne
		return nil
	}

	str := ""
	if err := utils.UnmarshalJSON(data, &str, "", true, true); err == nil {
		u.Str = &str
		u.Type = BodyTypeStr
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u Body) MarshalJSON() ([]byte, error) {
	if u.One != nil {
		return utils.MarshalJSON(u.One, "", true)
	}

	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	return nil, errors.New("could not marshal union type: all fields are null")
}

// HTTPMethod - HTTP method used to deliver the attempt
type HTTPMethod string

const (
	HTTPMethodLessThanNilGreaterThan HTTPMethod = "<nil>"
	HTTPMethodGet                    HTTPMethod = "GET"
	HTTPMethodPost                   HTTPMethod = "POST"
	HTTPMethodPut                    HTTPMethod = "PUT"
	HTTPMethodPatch                  HTTPMethod = "PATCH"
	HTTPMethodDelete                 HTTPMethod = "DELETE"
)

func (e HTTPMethod) ToPointer() *HTTPMethod {
	return &e
}

func (e *HTTPMethod) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "<nil>":
		fallthrough
	case "GET":
		fallthrough
	case "POST":
		fallthrough
	case "PUT":
		fallthrough
	case "PATCH":
		fallthrough
	case "DELETE":
		*e = HTTPMethod(v)
		return nil
	default:
		return fmt.Errorf("invalid value for HTTPMethod: %v", v)
	}
}

type EventAttempt struct {
	// Date the attempt was archived
	ArchivedAt *string `json:"archived_at,omitempty"`
	// Sequential number of attempts (up to and including this one) made for the associated event
	AttemptNumber *int64 `json:"attempt_number,omitempty"`
	Body          *Body  `json:"body,omitempty"`
	// ID of associated bulk retry
	BulkRetryID *string `json:"bulk_retry_id,omitempty"`
	// Date the attempt was created
	CreatedAt time.Time `json:"created_at"`
	// Date the attempt was delivered
	DeliveredAt *time.Time `json:"delivered_at,omitempty"`
	// Time elapsed between attempt initiation and final delivery (in ms)
	DeliveryLatency *int64  `json:"delivery_latency,omitempty"`
	DestinationID   *string `json:"destination_id,omitempty"`
	// Attempt could not complete because of an error
	ErrorCode *AttemptErrorCode `json:"error_code,omitempty"`
	// Event ID
	EventID string `json:"event_id"`
	// HTTP method used to deliver the attempt
	HTTPMethod *HTTPMethod `json:"http_method,omitempty"`
	// Attempt ID
	ID string `json:"id"`
	// URL of the destination where delivery was attempted
	RequestedURL *string `json:"requested_url,omitempty"`
	// Date the destination responded to this attempt
	RespondedAt *time.Time `json:"responded_at,omitempty"`
	// Time elapsed between attempt initiation and a response from the destination (in ms)
	ResponseLatency *int64 `json:"response_latency,omitempty"`
	// Attempt's HTTP response code
	ResponseStatus *int64        `json:"response_status,omitempty"`
	State          *AttemptState `json:"state,omitempty"`
	// Attempt status
	Status AttemptStatus `json:"status"`
	// Date the attempt was successful
	SuccessfulAt *time.Time `json:"successful_at,omitempty"`
	// Team ID
	TeamID string `json:"team_id"`
	// How the attempt was triggered
	Trigger *AttemptTrigger `json:"trigger,omitempty"`
	// Date the attempt was last updated
	UpdatedAt time.Time `json:"updated_at"`
}

func (e EventAttempt) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(e, "", false)
}

func (e *EventAttempt) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &e, "", false, false); err != nil {
		return err
	}
	return nil
}

func (o *EventAttempt) GetArchivedAt() *string {
	if o == nil {
		return nil
	}
	return o.ArchivedAt
}

func (o *EventAttempt) GetAttemptNumber() *int64 {
	if o == nil {
		return nil
	}
	return o.AttemptNumber
}

func (o *EventAttempt) GetBody() *Body {
	if o == nil {
		return nil
	}
	return o.Body
}

func (o *EventAttempt) GetBulkRetryID() *string {
	if o == nil {
		return nil
	}
	return o.BulkRetryID
}

func (o *EventAttempt) GetCreatedAt() time.Time {
	if o == nil {
		return time.Time{}
	}
	return o.CreatedAt
}

func (o *EventAttempt) GetDeliveredAt() *time.Time {
	if o == nil {
		return nil
	}
	return o.DeliveredAt
}

func (o *EventAttempt) GetDeliveryLatency() *int64 {
	if o == nil {
		return nil
	}
	return o.DeliveryLatency
}

func (o *EventAttempt) GetDestinationID() *string {
	if o == nil {
		return nil
	}
	return o.DestinationID
}

func (o *EventAttempt) GetErrorCode() *AttemptErrorCode {
	if o == nil {
		return nil
	}
	return o.ErrorCode
}

func (o *EventAttempt) GetEventID() string {
	if o == nil {
		return ""
	}
	return o.EventID
}

func (o *EventAttempt) GetHTTPMethod() *HTTPMethod {
	if o == nil {
		return nil
	}
	return o.HTTPMethod
}

func (o *EventAttempt) GetID() string {
	if o == nil {
		return ""
	}
	return o.ID
}

func (o *EventAttempt) GetRequestedURL() *string {
	if o == nil {
		return nil
	}
	return o.RequestedURL
}

func (o *EventAttempt) GetRespondedAt() *time.Time {
	if o == nil {
		return nil
	}
	return o.RespondedAt
}

func (o *EventAttempt) GetResponseLatency() *int64 {
	if o == nil {
		return nil
	}
	return o.ResponseLatency
}

func (o *EventAttempt) GetResponseStatus() *int64 {
	if o == nil {
		return nil
	}
	return o.ResponseStatus
}

func (o *EventAttempt) GetState() *AttemptState {
	if o == nil {
		return nil
	}
	return o.State
}

func (o *EventAttempt) GetStatus() AttemptStatus {
	if o == nil {
		return AttemptStatus("")
	}
	return o.Status
}

func (o *EventAttempt) GetSuccessfulAt() *time.Time {
	if o == nil {
		return nil
	}
	return o.SuccessfulAt
}

func (o *EventAttempt) GetTeamID() string {
	if o == nil {
		return ""
	}
	return o.TeamID
}

func (o *EventAttempt) GetTrigger() *AttemptTrigger {
	if o == nil {
		return nil
	}
	return o.Trigger
}

func (o *EventAttempt) GetUpdatedAt() time.Time {
	if o == nil {
		return time.Time{}
	}
	return o.UpdatedAt
}
